<div class="container-fluid py-4">
  <div class="row mb-4">
    <div class="col-12">
      <h1 class="h2">üë• Gesti√≥n de Usuarios</h1>
    </div>
  </div>

  <!-- Navigation Tabs -->
  <ul class="nav nav-tabs mb-4" role="tablist">
    <li class="nav-item" role="presentation">
      <a class="nav-link" href="<%= admin_dashboard_path %>">
        üìä Dashboard
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link active" href="<%= admin_users_path %>">
        üë• Usuarios
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" href="<%= admin_congregations_path %>">
        üèõÔ∏è Congregaciones
      </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" href="<%= admin_territories_path %>">
        üó∫Ô∏è Territorios
      </a>
    </li>
  </ul>

  <!-- Users Table -->
  <div class="card">
    <div class="card-header bg-white d-flex justify-content-between align-items-center">
      <h5 class="mb-0">Lista de Usuarios (<%= @users.count %>)</h5>
      <div>
        <small class="text-muted me-2">
          Usuarios activos: <%= @users.where(active: true).count %>
        </small>
      </div>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover mb-0">
          <thead class="table-light">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>Email</th>
              <th>Rol</th>
              <th>Congregaci√≥n</th>
              <th>Ciudad</th>
              <th>Estado</th>
              <th>Territorios</th>
              <th>Fecha Registro</th>
            </tr>
          </thead>
          <tbody>
            <% if @users.any? %>
              <% @users.each do |user| %>
                <tr>
                  <td><strong>#<%= user.id %></strong></td>
                  <td>
                    <%= user.name %>
                    <% if user.id == current_user.id %>
                      <span class="badge bg-info">T√∫</span>
                    <% end %>
                  </td>
                  <td><small><%= user.email %></small></td>
                  <td>
                    <span class="badge bg-<%= user.admin? ? 'danger' : user.anciano? ? 'warning' : user.auxiliar? ? 'info' : 'secondary' %>">
                      <%= user.role.capitalize %>
                    </span>
                  </td>
                  <td>
                    <% if user.congregation %>
                      <small><%= user.congregation.name %></small>
                    <% else %>
                      <span class="text-muted">Sin asignar</span>
                    <% end %>
                  </td>
                  <td><small><%= user.city || '-' %></small></td>
                  <td>
                    <% if user.active %>
                      <span class="badge bg-success">Activo</span>
                    <% else %>
                      <span class="badge bg-secondary">Inactivo</span>
                    <% end %>
                  </td>
                  <td class="text-center">
                    <span class="badge bg-light text-dark">
                      <%= user.assigned_territories_count %>
                    </span>
                  </td>
                  <td><small><%= user.created_at.strftime('%d/%m/%Y') %></small></td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="9" class="text-center text-muted py-4">
                  No hay usuarios registrados
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Info Alert -->
  <div class="alert alert-info mt-4" role="alert">
    <strong>‚ÑπÔ∏è Nota:</strong> La gesti√≥n completa de usuarios (editar, eliminar, cambiar roles) se implementar√° pr√≥ximamente. Por ahora puedes ver la lista y estad√≠sticas de todos los usuarios.
  </div>
</div>
